<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="leehojun.common.EmployeeMapper">
    <resultMap id="loginInfo" type="common.EmployeeDTO">
        <id property="empId" column="EMP_ID"/>
        <result property="empName" column="EMP_NAME"/>
        <result property="email" column="EMAIL"/>
    </resultMap>
    <select id="isEmployee" resultMap="loginInfo" parameterType="leehojun.run.MemberDTO">
        select
            EMP_NAME,
            EMAIL,
            EMP_ID
        from
            employee
        where
            EMP_NAME = #{name}
            and
            EMAIL = #{email}
            and
            EMP_ID = #{empId}
    </select>
    <resultMap id="getPhonenumber" type="leehojun.run.GetPhoneNumber">
        <result property="name" column="EMP_NAME"/>
        <result property="phone" column="PHONE"/>
    </resultMap>
    <select id="getPhoneNumber" resultMap="getPhonenumber" parameterType="hashmap">
        select
            EMP_NAME,
            PHONE
        from
            employee
        where
            EMP_NAME = #{name}
    </select>
    <update id="updateEmpInfo" parameterType="hashmap">
        update employee
        <set>
            <if test="email != null">
                EMAIL = #{email}
            </if>
            <if test="phone !=null">
                , PHONE = #{phone}
            </if>
        </set>
        where EMP_ID = #{empId}
    </update>
</mapper>